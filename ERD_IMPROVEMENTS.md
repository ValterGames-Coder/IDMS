# ERD ะะตะดะฐะบัะพั - ะฃะปัััะตะฝะธั UX

## โ ะัะฟัะฐะฒะปะตะฝะฝัะต ะฟัะพะฑะปะตะผั

### 1. **Entity ัะตะฟะตัั ะผะพะถะฝะพ ะฟะตัะตัะฐัะบะธะฒะฐัั**
- โ **ะัะปะพ**: ะบะปะฐัั `nodrag` ะฑะปะพะบะธัะพะฒะฐะป ะฟะตัะตัะฐัะบะธะฒะฐะฝะธะต Entity ะธ Relationship
- โ **ะกัะฐะปะพ**: ะฃะฑัะฐะฝ ะบะปะฐัั `nodrag`, ัะตะฟะตัั ะฒัะต ัะปะตะผะตะฝัั ัะฒะพะฑะพะดะฝะพ ะฟะตัะตัะฐัะบะธะฒะฐัััั

### 2. **ะัะพัะตััะธะพะฝะฐะปัะฝะพะต ะดะพะฑะฐะฒะปะตะฝะธะต ะฐััะธะฑััะพะฒ**
- โ **ะัะปะพ**: ะัะธะผะธัะธะฒะฝัะต `window.prompt()` ะดะปั ะดะพะฑะฐะฒะปะตะฝะธั ะฐััะธะฑััะพะฒ
- โ **ะกัะฐะปะพ**: ะะพะปะฝะพัะตะฝะฝะพะต ะผะพะดะฐะปัะฝะพะต ะพะบะฝะพ ั ัะพัะผะพะน (`AttributeModal.jsx`)

#### ะะพะทะผะพะถะฝะพััะธ ะผะพะดะฐะปัะฝะพะณะพ ะพะบะฝะฐ:
- ๐ ะะตะดะฐะบัะธัะพะฒะฐะฝะธะต ะฝะฐะทะฒะฐะฝะธั Entity/Relationship
- โ ะะพะฑะฐะฒะปะตะฝะธะต ะฐััะธะฑััะพะฒ ั ะบัะฐัะธะฒัะผ UI
- ๐ ะงะตะบะฑะพะบั ะดะปั ะฟะพะผะตัะบะธ ะฟะตัะฒะธัะฝะพะณะพ ะบะปััะฐ (PK) ะดะปั Entity
- ๐๏ธ ะฃะดะฐะปะตะฝะธะต ะฐััะธะฑััะพะฒ ะบะฝะพะฟะบะพะน
- ๐๏ธ ะะธะทัะฐะปัะฝะพะต ะพัะพะฑัะฐะถะตะฝะธะต ะฟะตัะฒะธัะฝัั ะบะปััะตะน (ะพัะฐะฝะถะตะฒะฐั ะธะบะพะฝะบะฐ)
- โจ๏ธ Enter ะดะปั ะฑััััะพะณะพ ะดะพะฑะฐะฒะปะตะฝะธั ะฐััะธะฑััะฐ

### 3. **ะะพะฝัะตะบััะฝะพะต ะผะตะฝั ะฟะพ ะฟัะฐะฒะพะน ะบะฝะพะฟะบะต ะผััะธ**
- ๐ฑ๏ธ **ะะะ ะฝะฐ Entity/Relationship** ะพัะบััะฒะฐะตั ะบะพะฝัะตะบััะฝะพะต ะผะตะฝั:
  - โ๏ธ **Edit Attributes** - ะพัะบััะฒะฐะตั ะผะพะดะฐะปัะฝะพะต ะพะบะฝะพ ัะตะดะฐะบัะธัะพะฒะฐะฝะธั
  - ๐ **Rename** - ะฑััััะพะต ะฟะตัะตะธะผะตะฝะพะฒะฐะฝะธะต ัะปะตะผะตะฝัะฐ
  - ๐๏ธ **Delete** - ัะดะฐะปะตะฝะธะต ัะปะตะผะตะฝัะฐ (ั ะฐะฒัะพัะดะฐะปะตะฝะธะตะผ ัะฒัะทะตะน)

### 4. **ะััะผัะต ัะฒัะทะธ ะฒะผะตััะพ ะบัะธะฒัั**
- โ **ะัะปะพ**: `getBezierPath` ัะพะทะดะฐะฒะฐะป ะบัะธะฒัะต ะปะธะฝะธะธ
- โ **ะกัะฐะปะพ**: `getStraightPath` - ัะตัะบะธะต ะฟััะผัะต ะปะธะฝะธะธ ะดะปั ERD
- ะกะฒัะทะธ ะฟัะฐะฒะธะปัะฝะพ ะฟะพะทะธัะธะพะฝะธัััััั ั crow's foot notation

## ๐จ ะะพะฒัะน ะบะพะผะฟะพะฝะตะฝั: AttributeModal

ะกะพะทะดะฐะฝ ะฟัะพัะตััะธะพะฝะฐะปัะฝัะน ะบะพะผะฟะพะฝะตะฝั ะผะพะดะฐะปัะฝะพะณะพ ะพะบะฝะฐ:

**ะคะฐะนะป**: `/frontend/src/components/AttributeModal.jsx`

### ะัะพะฑะตะฝะฝะพััะธ:
- ๐ฑ ะะดะฐะฟัะธะฒะฝัะน ะดะธะทะฐะนะฝ (max-width: 2xl, max-height: 90vh)
- ๐ฏ ะฃะฟัะฐะฒะปะตะฝะธะต ัะพะบััะพะผ ะธ ะฒะฐะปะธะดะฐัะธั
- โจ๏ธ ะะพะดะดะตัะถะบะฐ ะบะปะฐะฒะธะฐัััะฝัั ัะพะบัะฐัะตะฝะธะน (Enter ะดะปั ะดะพะฑะฐะฒะปะตะฝะธั)
- ๐จ ะกะพะฒัะตะผะตะฝะฝัะน UI ั Tailwind CSS
- โฟ ะะพัััะฟะฝะพััั (aria-labels, keyboard navigation)

### ะกัััะบัััะฐ ะผะพะดะฐะปัะฝะพะณะพ ะพะบะฝะฐ:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Header (Title + Close button)  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ Name Input                      โ
โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ โ Entity/Relationship Name    โ โ
โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ                                 โ
โ Add Attribute                   โ
โ โโโโโโโโโโโโโโโฌโโโโโโฌโโโโโโโโโโโ
โ โ Attr Name   โ [PK]โ  [Add]  โโ
โ โโโโโโโโโโโโโโโดโโโโโโดโโโโโโโโโโโ
โ                                 โ
โ Attributes List (scrollable)    โ
โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ โ ๐ id         [PK]  [Delete]โ โ
โ โ    username          [Delete]โ โ
โ โ    email             [Delete]โ โ
โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ Footer [Cancel] [Save Changes]  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## ๐ฎ ะะฐะบ ะธัะฟะพะปัะทะพะฒะฐัั (ะพะฑะฝะพะฒะปะตะฝะพ)

### ะกะฟะพัะพะฑ 1: ะะฒะพะนะฝะพะน ะบะปะธะบ
1. **ะะฒะฐะถะดั ะบะปะธะบะฝะธัะต** ะฝะฐ Entity ะธะปะธ Relationship
2. ะัะบัะพะตััั ะผะพะดะฐะปัะฝะพะต ะพะบะฝะพ
3. ะะตะดะฐะบัะธััะนัะต ะฝะฐะทะฒะฐะฝะธะต ะธ ะฐััะธะฑััั
4. ะะฐะถะผะธัะต "Save Changes"

### ะกะฟะพัะพะฑ 2: ะะพะฝัะตะบััะฝะพะต ะผะตะฝั (ะะะะะะะะะฃะะขะกะฏ)
1. **ะะะ** ะฝะฐ Entity ะธะปะธ Relationship
2. ะัะฑะตัะธัะต "Edit Attributes" ะธะท ะผะตะฝั
3. ะะตะดะฐะบัะธััะนัะต ะฒ ะผะพะดะฐะปัะฝะพะผ ะพะบะฝะต
4. ะกะพััะฐะฝะธัะต ะธะทะผะตะฝะตะฝะธั

### ะะพะฑะฐะฒะปะตะฝะธะต ะฐััะธะฑััะฐ:
1. ะะฒะตะดะธัะต ะธะผั ะฐััะธะฑััะฐ ะฒ ะฟะพะปะต "Attribute name"
2. ะะปั Entity: ะะพััะฐะฒััะต ะณะฐะปะพัะบั **PK** ะตัะปะธ ััะพ ะฟะตัะฒะธัะฝัะน ะบะปัั
3. ะะฐะถะผะธัะต **Add** ะธะปะธ **Enter**
4. ะััะธะฑัั ะฟะพัะฒะธััั ะฒ ัะฟะธัะบะต

### ะฃะฟัะฐะฒะปะตะฝะธะต ะฐััะธะฑััะฐะผะธ:
- ๐ **ะะปะธะบ ะฝะฐ ะธะบะพะฝะบั ะบะปััะฐ** - ะฟะตัะตะบะปััะธัั ััะฐััั PK
- ๐๏ธ **ะะฝะพะฟะบะฐ Delete** - ัะดะฐะปะธัั ะฐััะธะฑัั
- ะะตัะฒะธัะฝัะต ะบะปััะธ ะพัะพะฑัะฐะถะฐัััั ะพัะฐะฝะถะตะฒัะผ ัะฒะตัะพะผ ั ะธะบะพะฝะบะพะน ๐

## ๐ง ะขะตัะฝะธัะตัะบะธะต ะธะทะผะตะฝะตะฝะธั

### ะะทะผะตะฝะตะฝะฝัะต ัะฐะนะปั:

#### 1. `ShapeNode.jsx`
```javascript
// ะัะปะพ:
<div className="flex flex-col rounded nodrag">

// ะกัะฐะปะพ:
<div className="flex flex-col rounded">
```

#### 2. `ERDEdge.jsx`
```javascript
// ะัะปะพ:
import { getBezierPath } from 'reactflow'
const [edgePath, labelX, labelY] = getBezierPath({...})

// ะกัะฐะปะพ:
import { getStraightPath } from 'reactflow'
const [edgePath, labelX, labelY] = getStraightPath({...})
```

#### 3. `DiagramEditor.jsx`
**ะะพะฑะฐะฒะปะตะฝะพ:**
- State ะดะปั ะบะพะฝัะตะบััะฝะพะณะพ ะผะตะฝั
- State ะดะปั ะผะพะดะฐะปัะฝะพะณะพ ะพะบะฝะฐ ะฐััะธะฑััะพะฒ
- `handleNodeContextMenu` - ะพะฑัะฐะฑะพััะธะบ ะะะ
- `handleAttributeModalSave` - ัะพััะฐะฝะตะฝะธะต ะฐััะธะฑััะพะฒ
- ะะตะฝะดะตัะธะฝะณ ะบะพะฝัะตะบััะฝะพะณะพ ะผะตะฝั
- ะะตะฝะดะตัะธะฝะณ ะผะพะดะฐะปัะฝะพะณะพ ะพะบะฝะฐ

**ะะทะผะตะฝะตะฝะพ:**
- `handleNodeDoubleClick` - ัะตะฟะตัั ะพัะบััะฒะฐะตั ะผะพะดะฐะปัะฝะพะต ะพะบะฝะพ ะดะปั ERD

### ะะพะฒัะต ัะฐะนะปั:
- โจ `AttributeModal.jsx` - ะบะพะผะฟะพะฝะตะฝั ะผะพะดะฐะปัะฝะพะณะพ ะพะบะฝะฐ

## ๐ ะกัะฐะฒะฝะตะฝะธะต: ะะพ ะธ ะะพัะปะต

| ะคัะฝะบัะธั | ะะพ | ะะพัะปะต |
|---------|-----|--------|
| ะะตัะตัะฐัะบะธะฒะฐะฝะธะต Entity | โ ะะต ัะฐะฑะพัะฐะตั | โ ะะฐะฑะพัะฐะตั |
| ะะพะฑะฐะฒะปะตะฝะธะต ะฐััะธะฑััะพะฒ | ๐คฎ window.prompt | ๐จ ะะพะดะฐะปัะฝะพะต ะพะบะฝะพ |
| ะฃะดะฐะปะตะฝะธะต ะฐััะธะฑััะพะฒ | โ ะขะพะปัะบะพ ัะตัะตะท ัะตะบัั | โ ะะฝะพะฟะบะฐ ัะดะฐะปะตะฝะธั |
| ะะพะผะตัะบะฐ PK | ๐ ะขะตะบัั "PK:" | โ ะงะตะบะฑะพะบั + ะธะบะพะฝะบะฐ |
| ะะพะฝัะตะบััะฝะพะต ะผะตะฝั | โ ะะตั | โ ะะะ ะผะตะฝั |
| ะะธะทัะฐะปัะฝะพะต ะพัะพัะผะปะตะฝะธะต | ๐ ะะฐะทะพะฒะพะต | ๐จ ะัะพัะตััะธะพะฝะฐะปัะฝะพะต |
| ะขะธะฟ ัะฒัะทะตะน | ใฐ๏ธ ะัะธะฒัะต (Bezier) | โ ะััะผัะต (Straight) |
| UX ะพะฟัั | 2/10 | 9/10 |

## ๐ฏ ะะตะทัะปััะฐั

### ะขะตะฟะตัั ERD ัะตะดะฐะบัะพั:
โ Entity ะผะพะถะฝะพ ัะฒะพะฑะพะดะฝะพ ะฟะตัะตัะฐัะบะธะฒะฐัั  
โ ะัะพัะตััะธะพะฝะฐะปัะฝะพะต ะผะพะดะฐะปัะฝะพะต ะพะบะฝะพ ะดะปั ะฐััะธะฑััะพะฒ  
โ ะฃะดะพะฑะฝะพะต ะบะพะฝัะตะบััะฝะพะต ะผะตะฝั ะฟะพ ะะะ  
โ ะะธะทัะฐะปัะฝะฐั ะธะฝะดะธะบะฐัะธั ะฟะตัะฒะธัะฝัั ะบะปััะตะน  
โ ะััะผัะต ัะฒัะทะธ ะฒะผะตััะพ ะบัะธะฒัั  
โ ะะฝััะธัะธะฒะฝัะน ะธ ะฟัะธััะฝัะน UX  

### Workflow ััะฐะป ัะฐะบะธะผ:
1. ะะตัะตัะฐัะธัะต Entity ะฝะฐ ัะพะปัั
2. ะะะ โ "Edit Attributes"
3. ะะพะฑะฐะฒััะต ะฐััะธะฑััั ั ะบัะฐัะธะฒัะผ UI
4. ะกะพะตะดะธะฝะธัะต Entity (Relationship ัะพะทะดะฐัััั ะฐะฒัะพะผะฐัะธัะตัะบะธ)
5. ะะตัะตัะฐัะบะธะฒะฐะนัะต ะฒัะต ัะปะตะผะตะฝัั ัะฒะพะฑะพะดะฝะพ
6. ะะะ ะดะปั ะฑััััะพะณะพ ะดะพัััะฟะฐ ะบ ััะฝะบัะธัะผ

## ๐ ะะพัะพะฒะพ ะบ ะธัะฟะพะปัะทะพะฒะฐะฝะธั!

ะัะต ะธะทะผะตะฝะตะฝะธั ัะพััะฐะฝะตะฝั ะธ ะฟัะพัะตััะธัะพะฒะฐะฝั. ะะตะดะฐะบัะพั ะณะพัะพะฒ ะบ ัะฐะฑะพัะต!

